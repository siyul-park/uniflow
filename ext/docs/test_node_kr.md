# Test 노드

**Test 노드**는 개발한 워크플로우를 테스트하고 검증하는 기능을 제공합니다. 단순한 성공/실패 검증부터 구성 가능한 출력 포트를 통한 복잡한 검증 시나리오까지 지원합니다.

## 명세

추가적인 구성 매개변수를 필요로 하지 않습니다.

## 포트

포트를 정의하는 방법은 크게 두 가지로, 테스트 할 워크플로우가 단순 정상 실행을 목적으로 한다면 out 포트 하나만을 사용하고, 두 개 이상 또는 상세한 테스트 과정이 필요하다면 out[] 배열로 구성합니다.

- **out**: 테스트할 워크플로우의 결과를 받는 포트입니다.
  - 연결된 워크플로우를 실행합니다
  - 연결된 워크플로우에서 오류가 발생하지 않으면 테스트 성공으로 판단됩니다
  - 워크플로우에서 오류가 반환되면 테스트 실패로 판단됩니다

- **out[]**: 테스트할 워크플로우**들**의 결과를 받는 포트이며, 실행 시 배열 인덱스 순서대로 [index, value] 형식으로 결과가 전달됩니다.
  - **index**: 현재 순서를 의미합니다. 처음에는 -1로 시작합니다.
  - **value**: 테스트 결과와 비교할 값을 의미합니다.
  - 검증 노드가 워크플로우를 실행하고 나온 결과와 예상한 값을 비교하여 일치하지 않으면 테스트에 실패하며, 이후 테스트는 전부 실패한 것으로 간주합니다.

## 예제

### 단순 테스트 구성
```yaml
kind: test
ports:
  out:
    - name: sub
      port: in
```

### 확장 테스트 구성
```yaml
kind: test
ports:
  out[0]:
    - name: sub
      port: in
  out[1]:
    - name: assert
      port: in
```

## 동작 방식

1. **단순 테스트**
  - 연결된 워크플로우가 오류 없이 완료되면 테스트 성공
  - 워크플로우에서 오류가 반환되면 테스트 실패

2. **확장 테스트**
  - `out[0]`에 연결된 워크플로우가 먼저 실행됨
  - 결과가 [index, value] 형식으로 반환되고, `out[1]`에 연결된 노드로 전달됨
  - 워크플로우 실행과 value검증이 모두 통과해야 테스트 성공
  - 두 단계 중 하나라도 실패하면 테스트 실패

3. **오류 처리**
  - 모든 오류는 테스트 노드를 통해 전파됨
  - 디버깅을 위한 상세한 오류 정보 제공
  - 오류 발생 시 테스트 실행이 즉시 종료 