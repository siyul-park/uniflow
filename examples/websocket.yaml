- kind: listener
  name: listener
  protocol: http
  port: 8000
  links:
    out:
      - name: router
        port: in

- kind: router
  name: router
  routes:
    - method: GET
      path: /ws
      port: out[0]
  links:
    out[0]:
      - name: upgrader
        port: io

- kind: upgrader
  name: upgrader
  protocol: websocket
  links:
    out:
      - name: upgrade
        port: in
