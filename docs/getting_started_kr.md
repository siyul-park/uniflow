# π€ μ‹μ‘ν•κΈ°

μ΄ μΆ…ν•©μ μΈ μ•λ‚΄μ„λ” [λ…λ Ήμ¤„ μΈν„°νμ΄μ¤(CLI)](../cmd/README_kr.md)λ¥Ό μ‚¬μ©ν•μ—¬ μ›ν¬ν”λ΅μ°λ¥Ό κ΄€λ¦¬ν•κ³  μ—”μ§„μ„ μ‹¤ν–‰ν•λ” λ°©λ²•μ„ μ†κ°ν•©λ‹λ‹¤. μ„¤μΉλ¶€ν„° μ›ν¬ν”λ΅μ° μ μ–΄ λ° κµ¬μ„± μ„¤μ •κΉμ§€ λ¨λ“  κ³Όμ •μ„ λ‹¤λ£° κ²ƒμ…λ‹λ‹¤.

## μ†μ¤μ—μ„ μ„¤μΉν•κΈ°

λ¨Όμ € [λ‚΄μ¥λ ν™•μ¥ κΈ°λ¥](../ext/README_kr.md)κ³Ό ν•¨κ» μ›ν¬ν”λ΅μ°λ¥Ό μ μ–΄ν•  μ μλ” [CLI](../cmd/README_kr.md)λ¥Ό μ„¤μ •ν•΄ λ³΄κ² μµλ‹λ‹¤. μ‹μ‘ν•κΈ° μ „μ— μ‹μ¤ν…μ— [Go 1.22](https://go.dev/doc/install) μ΄μƒμ΄ μ„¤μΉλμ–΄ μλ”μ§€ ν™•μΈν•μ„Έμ”.

μ°μ„ , λ¦¬ν¬μ§€ν† λ¦¬λ¥Ό ν΄λ΅ ν•©λ‹λ‹¤:

```sh
git clone https://github.com/siyul-park/uniflow
```

ν΄λ΅ ν• λ””λ ‰ν† λ¦¬λ΅ μ΄λ™ν•©λ‹λ‹¤:

```sh
cd uniflow
```

μμ΅΄μ„±μ„ μ„¤μΉν•κ³  ν”„λ΅μ νΈλ¥Ό λΉλ“ν•©λ‹λ‹¤:

```sh
make init
make build
```

λΉλ“ κ³Όμ •μ΄ μ™„λ£λλ©΄ `dist` ν΄λ”μ— μ‹¤ν–‰ νμΌμ΄ μƒμ„±λμ–΄ μ‚¬μ©ν•  μ¤€λΉ„κ°€ λ©λ‹λ‹¤.

## κµ¬μ„±

Uniflowλ” `.uniflow.toml` νμΌμ΄λ‚ μ‹μ¤ν… ν™κ²½ λ³€μλ¥Ό ν†µν•΄ μ μ—°ν• κµ¬μ„± μµμ…μ„ μ κ³µν•©λ‹λ‹¤:

| TOML ν‚¤            | ν™κ²½ λ³€μ             | μμ‹                      |
|--------------------|--------------------|--------------------------|
| `database.url`     | `DATABASE.URL`     | `mem://` λλ” `mongodb://` |
| `database.name`    | `DATABASE.NAME`    | -                        |
| `collection.nodes` | `COLLECTION.NODES` | `nodes`                  |

[MongoDB](https://www.mongodb.com/)λ¥Ό μ‚¬μ©ν•  κ²½μ°, μ—”μ§„μ΄ λ…Έλ“ λ…μ„Έ λ³€κ²½μ„ μ¶”μ ν•  μ μλ„λ΅ [λ³€κ²½ μ¤νΈλ¦Ό](https://www.mongodb.com/docs/manual/changeStreams/)μ„ ν™μ„±ν™”ν•΄μ•Ό ν•©λ‹λ‹¤. μ΄λ¥Ό μ„ν•΄μ„λ” [λ³µμ  μ„ΈνΈ](https://www.mongodb.com/docs/manual/replication/) μ„¤μ •μ΄ ν•„μ”ν•©λ‹λ‹¤.

## CLI λ…λ Ήμ–΄

CLIλ” μ›ν¬ν”λ΅μ° μ μ–΄λ¥Ό μ„ν• λ‹¤μ–‘ν• λ…λ Ήμ–΄λ¥Ό μ κ³µν•©λ‹λ‹¤. μ‚¬μ© κ°€λ¥ν• λ¨λ“  λ…λ Ήμ–΄λ¥Ό λ³΄λ ¤λ©΄ λ‹¤μμ„ μ‹¤ν–‰ν•μ„Έμ”:

```sh
./dist/uniflow --help
```

### Apply

`apply` λ…λ Ήμ–΄λ” λ„¤μ„μ¤νμ΄μ¤μ— λ…Έλ“ λ…μ„Έλ¥Ό μ¶”κ°€ν•κ±°λ‚ μ—…λ°μ΄νΈν•©λ‹λ‹¤:

```sh
./dist/uniflow apply --filename examples/ping.yaml
```

μ΄ λ…λ Ήμ–΄λ” κ²°κ³Όλ¥Ό μ¶λ ¥ν•λ©°, λ„¤μ„μ¤νμ΄μ¤λ¥Ό μ§€μ •ν•μ§€ μ•μΌλ©΄ `default` λ„¤μ„μ¤νμ΄μ¤λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.

### Delete

`delete` λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•μ—¬ λ„¤μ„μ¤νμ΄μ¤μ—μ„ λ…Έλ“ λ…μ„Έλ¥Ό μ κ±°ν•  μ μμµλ‹λ‹¤:

```sh
./dist/uniflow delete --filename examples/ping.yaml
```

μ΄ λ…λ Ήμ–΄λ” `examples/ping.yaml`μ— μ •μλ λ¨λ“  λ…Έλ“ λ…μ„Έλ¥Ό μ§€μ •λ λ„¤μ„μ¤νμ΄μ¤μ—μ„ μ κ±°ν•©λ‹λ‹¤. λ„¤μ„μ¤νμ΄μ¤λ¥Ό μ§€μ •ν•μ§€ μ•μΌλ©΄ `default` λ„¤μ„μ¤νμ΄μ¤λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.

### Get

`get` λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•μ—¬ λ„¤μ„μ¤νμ΄μ¤μ—μ„ λ…Έλ“ λ…μ„Έλ¥Ό μ΅°νν•  μ μμµλ‹λ‹¤:

```sh
./dist/uniflow get
```

μ΄ λ…λ Ήμ–΄λ” μ§€μ •λ λ„¤μ„μ¤νμ΄μ¤μ λ¨λ“  λ…Έλ“ λ…μ„Έλ¥Ό ν‘μ‹ν•©λ‹λ‹¤. λ„¤μ„μ¤νμ΄μ¤λ¥Ό μ§€μ •ν•μ§€ μ•μΌλ©΄ `default` λ„¤μ„μ¤νμ΄μ¤λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.

### Start

`start` λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•μ—¬ νΉμ • λ„¤μ„μ¤νμ΄μ¤μ λ…Έλ“ λ…μ„Έλ΅ λ°νƒ€μ„μ„ μ‹μ‘ν•  μ μμµλ‹λ‹¤:

```sh
./dist/uniflow start
```

λ„¤μ„μ¤νμ΄μ¤κ°€ λΉ„μ–΄ μλ‹¤λ©΄ `--filename` ν”λκ·Έλ¥Ό μ‚¬μ©ν•μ—¬ μ΄κΈ° λ…Έλ“ λ…μ„Έλ¥Ό μ κ³µν•  μ μμµλ‹λ‹¤:

```sh
./dist/uniflow start --filename examples/ping.yaml
```

## HTTP API ν†µν•©

HTTP APIλ¥Ό ν†µν•΄ λ…Έλ“ λ…μ„Έλ¥Ό μμ •ν•λ ¤λ©΄ μ΄λ¬ν• κΈ°λ¥μ„ λ…Έμ¶ν•λ” μ›ν¬ν”λ΅μ°λ¥Ό μ„¤μ •ν•΄μ•Ό ν•©λ‹λ‹¤. [κΈ°λ³Έ ν™•μ¥](../ext/README_kr.md)μ— ν¬ν•¨λ `syscall` λ…Έλ“λ¥Ό ν™μ©ν•μ„Έμ”:

```yaml
kind: syscall
opcode: nodes.create # nodes.read, nodes.update, nodes.delete
```

μ‹μ‘ν•λ ¤λ©΄ [μ›ν¬ν”λ΅μ° μμ ](../examples/system.yaml)λ¥Ό μ°Έκ³ ν•μ„Έμ”. ν•„μ”μ— λ”°λΌ μ΄ μ›ν¬ν”λ΅μ°μ— μΈμ¦ λ° κ¶ν• λ¶€μ—¬ ν”„λ΅μ„Έμ¤λ¥Ό μ¶”κ°€ν•  μ μμµλ‹λ‹¤. μΌλ°μ μΌλ΅ μ΄λ¬ν• λ°νƒ€μ„ μ μ–΄ μ›ν¬ν”λ΅μ°λ” `system` λ„¤μ„μ¤νμ΄μ¤μ— μ •μλ©λ‹λ‹¤.
